= Mortago v2.0 - User Guide
:site-section: UserGuide
:toc:
:toc-title:
:toc-placement: preamble
:sectnums:
:imagesDir: images
:stylesDir: stylesheets
:xrefstyle: full
:toc:
:toclevels: 3
:experimental:
ifdef::env-github[]
:tip-caption: :ðŸ’¡
:note-caption: :information_source:
endif::[]
:repoURL: https://github.com/AY1920S1-CS2103T-T13-2/main

By: `Team  AY1920S1-CS2103T-T13-2`      Since: `Sep 2019`      Licence: `MIT`

== Introduction

Mortago is a mortuary management system for hospitals. Mortago is optimized for efficient mortuary managers who *prefer
to work with a Command Line Interface (CLI)* while still having the benefits of a Graphical User Interface (GUI).

Mortago provides a *convenient dashboard* for the mortuary manager to keep track of all bodies and fridges, outstanding
tasks, and alerts. It replaces and improves upon the traditional whiteboard system. Mortago allows the mortuary management to be more accurate in managing tasks, calculating the availability of space, viewing archives and generating reports automatically.

Interested? Refer to <<Quick-Start>> below to get started. Enjoy!

[[Quick-Start]]
== Quick Start

.  Ensure you have `Java 11` or above installed in your Computer.
.  Download the latest `mortago.jar` link:{repoURL}/releases[here].
.  Copy the file to the folder you want to use as the home folder for Mortago.
.  Double-click the file to start the app. The GUI should appear in a few seconds.
+
image::Ui.png[width="790"]
+
.  Type the command in the command box and press kbd:[Enter] to execute it. +
e.g. typing *`help`* and pressing kbd:[Enter] will open the help window.
.  Some example commands you can try:


* *`list -b`* : lists all bodies
* *`workers`* : switches to the workers tab
* **`add -w`**`/name John Doe /dob 17-05-1980` :
adds a worker named John Doe (with his date of birth) to the management system.
* **`delete -w`**`2` : deletes the worker with worker ID W000002
* *`exit`* : exits the app

.  Refer to <<Features>> for details of each command.

[[Features]]
== Features

====
*Command Specification*

Most commands in Mortago are specified with the general format: `COMMAND_WORD -FLAG ATTRIBUTES`

* `COMMAND_WORD` specifies what you want Mortago to do.
** eg. `add` will tell Mortago to create an entry according to the details that you supply in the later half of the command.
* `-FLAG` specifies what type of entry you are referring to.
** There are 3 types of entries in Mortago: worker, body and fridge. The list below details what each of the following `-FLAG` refers to.
*** `-w` indicates a worker
*** `-b` indicates a body
*** `-f` indicates a fridge
* `ATTRIBUTES` specifies the information that you need to supply for the command to execute.


*Attributes*

|===
| :bulb: What are `ATTRIBUTES`?
a| Attributes are properties of a worker, body or fridge that are supplied by you when executing a command.

* e.g. `name` is an attribute for both body and worker entries.
* The full list of attributes for each entry can be found in <<add, Section 3.1.1>>.

|===

* `ATTRIBUTES` are represented with the format: `/attributeName attribute`

** The `/attributeName` should always be given before specifying the information of the `attribute` that the entry has.
** eg. when specifying the `/name name` of a body with the name "John Doe", it should be given as `/name John Doe`.


* `ATTRIBUTES` in parentheses are optional.
    ** e.g. The following 2 commands are valid for the update command, with the abridged format: `update -b (/religion religion /status status)`.
        *** `update -b /religion Buddhist`
        *** `update -b /religion Buddhist /status released`
* `ATTRIBUTES` specified in a command can be given in any order.
    ** e.g. The following 2 commands are valid for the update command, with the abridged format: `update -b (/religion religion /status status)`.
        *** `update -b /religion Buddhist /status released`
        *** `update -b /status released /religion Buddhist`
* Commands with fields tagged with `...` must be supplied at least one `ATTRIBUTE` argument. For example, when `...` appears in parentheses, it means that you must supply at least one or more valid arguments.
    ** For the filter command: `filter (/attributeName attributeValue ...)`
    , these are all valid commands:
    *** `filter /firstName John` and `filter /sex F` are valid commands.
    *** `filter` is an invalid command.


*Identification Number*

* Some commands require a -flag while some are optional. List of flags:
    ** -b: to indicate a `body` entry
    ** -w: to indicate a `worker` entry
    ** -f: to indicate a `fridge` entry
    ** -v: view the verbose description of all commands and their flags.
    *** For example, `update -b /id 1 /name John Bear`
is a valid command that uses a flag.


* All entries in Mortago have a unique idfentification number tagged to it.

* The identification number is automatically generated by Mortago for your convenience.

* Identification numbers in Mortago have the format as shown below, where `#` is a number from 0-9:
    ** `body` entries: `B\\####\####`
    ** `worker` entries: `W\\#####`
    **  `fridge` entries: `F##`

* If you need to supply the identification number to a command, providing the number (e.g. `20` instead of `W00020`) is sufficient.

====

=== Create, Read, Update and Delete Entries

// tag::add[]

[[add]]
==== Add an entry: `add`

You can add a body, worker or fridge by entering an add command that follows the format given below.

*Format*: +
This table details how you can craft your add command to add an entry in Mortago.
|===

| Purpose |  Format

| Add a new worker

a|
[source,java]
add -w
/name name
/sex  sex
/dateJoined dateJoined
(/designation designation)
(/employmentStatus employmentStatus)
(/phoneNo phoneNumber)
(/dob dateOfBirth)

---

| Add a new body
a|
[source,java]
add -b
/name name
/sex  sex
/dod dateOfDeath
/doa dateOfAdmission
(/dob dateOfBirth)
(/status status)
(/nric nricNumber)
(/religion religion)
(/nameNOK nameOfNextOfKin)
(/relationship relationshipOfNextOfKin)
(/phoneNOK phoneOfNextOfKin)
(/cod causeOfDeath)
(/details details)
(/organsForDonation organsForDonation)
(/fridgeId fridgeId)

---
| Add a new fridge
a|
[source,java]
add -f

[TIP]
Default status: Unoccupied

|===

Example:

|===

| Command | Expected Output

a|
[source,java]
add -w
/name Mary
/phoneNo 87654321
/sex female
/dateJoined 18/08/2019
/designation Autopsy Technician

---

| Worker added

a|
[source,java]
add -b
/name John Doe
/sex male
/dob 12/12/1984
/dod 12/08/2019 2358
/doa 13/08/2019 0200
/status contactedNOK
/nric S8456372C
/religion Catholic
/nameNOK Jack Smith
/relationship Husband
/phoneNOK 83462756
/cod Car Accident
/details Heavy bleeding and head injury
/organsForDonation NIL
/fridgeId 2

---
| Body added

a|
[source,java]
add -f


| Fridge added

|===

// end::add[]

// tag::update[]

[[update]]
==== Updating an entity: `update`
This command allows you to update the attributes of an entity.
You have to indicate the entity type you want to update with a flag, as described in <<Features>>.
You can specify one or more attributes to change, but at least one valid attribute must be provided.

Format: `update -flag /id id (/attributeName attributeValue ...)`

There are some attributes that you can update once the entity is created. For this command,
the list of valid attributes and their command prefixes can be found below:
|===

| Entity | Attribute

| Body

a|
[source,java]
Name (/name)
Sex (/sex)
NRIC (/nric)
Date of Birth (/dob)
Date of Death (/dod)
Date of Admission (/doa)
Status (/status)
Religion (/religion)
Name of Next-of-Kin (/nameNOK)
Relationship (/relationship)
Phone Number of Next-of-Kin (/phoneNOK)
Cause of Death (/cod)
Details (/details)
Organs For Donation (/organsForDonation)
Fridge ID (/fridgeId)

---

| Worker
a|
[source,java]
Phone Number (/phoneNo)
Sex (/sex)
Date of Birth (/dob)
Date Joined (/dateJoined)
Designation (/designation)
Employment Status (/status)


---
| Fridge
a|
[source,java]
Fridge Status (/status)
Body ID (/id)

[TIP]
Make sure your dates are in the format DD/MM/YYYY!

|===


Example: +
Imagine that someone (Jane Doe) just got promoted! You have to change her designation in Mortago.

Instead of typing out all the irrelevant attributes a Worker has, you just have to input her ID number
and her new designation.

|===

| Command | Expected Output

|
`update -w /id 1 /designation Senior Autopsy Technician`

| Status of worker 1 changed

|===

// end::update[]

// tag::find[]

==== Locating entries by name: `find`

Finds bodies or workers whose names contain any of the given keywords. +

Below are some important information regarding this command:
****
* The search is case insensitive. e.g `hans` will match `Hans`
* The order of the keywords does not matter. e.g. `Hans Bo` will match `Bo Hans`
* Only the name is searched.
* Only full words will be matched e.g. `Han` will not match `Hans`
* Persons matching at least one keyword will be returned (i.e. `OR` search). e.g. `Hans Bo` will return `Hans Gruber`, `Bo Yang`
****
Format: `find (flag) (keyword)...`

Examples:

* `find -b John` +
Returns any bodies having names `John`
* `find -w Betsy Tim John` +
Returns any workers having names `Betsy`, `Tim`, or `John`

// end::find[]


// tag::delete[]

==== Deleting a person : `delete`

Delete a body, worker or fridge entry, indicated by its id number. +
Format: `delete -flag  id`


****
* Deletes the body, worker or fridge entry with the specified identification number.
* The identification number is automatically generated when an entity is created and is in the format `BXXXXXXXX`, `WXXXXX`, or `FXX` for a
body, worker or fridge entry respectively.
X represents any digit.
* You only need to specify the number portion of the ID, without leading zeroes.
****

Examples:

* `delete -w 1` +
The worker with the identification number `W00001` will be deleted.

// end::delete

// tag::clear[]

==== Clearing all entries : `clear`

Clears all entries from Mortago. +
Format: `clear`

// end::clear[]

// tag::view[]

====  View an entry: `view`
View a single entry of a body, worker, fridge.

Format: `view -flag /id id`

|===
| Flags | Usage
| -b | View the body with the given ID.
| -w | View the worker with the given ID.
| -f | View the fridge with the given ID.
|===

Example: `view -b /id 91` +
View a body with the ID B00000091.

// end::view[]

// tag::list[]

==== List all entries: `list`
List all entries of bodies, workers, or fridges.

Format: `list -flag`

|===
| Flags | Usage
| -b | View all bodies.
| -w | View all workers.
| -f | View all fridges.
|===

Example: `list -b` +
Lists all bodies currently in Mortago.

// end::list[]

=== General

// tag::dashboard[]

==== Display dashboard: `dashboard`

Brings up the dashboard to the front of the application. +
The dashboard provides a compact view of all bodies, workers and fridges, as well as several important statistics that may be useful to you.

Format: `dashboard`

// end::dashboard[]

// tag::alerts[]

==== View alerts panel: `alerts`
View all alerts. Alerts are automatically generated by Mortago.
Alerts are made when one of the following happens:

* Next of kin could not be contacted within 24 hours from the time of arrival of the body.
* The body is not claimed on the specified date of collection as specified by next of kin.

Once the mortuary manager takes the relevant action, the alert will be automatically removed.

Format: `alerts`

// end::alerts[]

// tag::sortfilter[]

==== Sort all entries: `sort` `[coming in v2.0]`
Sort all displayed entries according to a given order. Only body and worker entries can be sorted.
Sort only works on the entries that are in view. For example, to sort body entries, the you need to first navigate to the bodies view.
Types of ordering can be found below:

* `name`: entries are sorted by alphabetical order of their names
* `id`: entries are sorted by their id number, in descending order (newest entry appear first)
    ** `id asc`: entries are sorted in ascending order of id number
    ** `id desc`: entries are sorted in descending order of id number
         *** If neither 'asc' or 'desc' qualifiers are supplied, the ordering is by default descending.
* `status`: entries are sorted by their statuses in this order:

Format: `sort /order order`

Example:

* `sort /order status` +
All entries will be sorted and grouped according to their statuses.
* `sort /order id asc` +
All entries will be sorted according to their id number in ascending order.

==== Filter all entries: `filter`
This command allows you to filter all entries according to the given keywords in any of an entryâ€™s attributes. All entries with matching keywords will be displayed. Keyword is case-insensitive.

All attributes of a body or worker entry can be filtered. If more than one attribute is specified, the entries displayed must fulfill all attributes. Please refer to <<Section 3.1.1>> for the different fields available to be filtered.

Format: `filter -flag /attributeName attributeValue ...`

Example:
* `filter -w /sex female` +
All female worker entries will be displayed.

* `filter -b /cod Car Accident /sex male` +
All body entries with car accident as the cause of death and those that are male will be displayed.
// end::sortfilter[]

// tag::undoredo[]
==== Undoing a command: `undo`
This command undoes the effects of the last command you executed. You can undo up to 10 of your most recent commands.
The commands are undone starting from the most recent to the least recent.

Format: `undo` or `u`

[TIP]
Only commands that change Mortago's data can be undone. For example, `add`, `update`, `clear`, and `delete` can be undone while
`list` or `find` cannot be undone.
[TIP]
You can `undo` a `clear` command, but note that you cannot redo any past undone commands after that.
[TIP]
Other events that occur due to a command will also be undone if the command is undone. For example, if an `add` command
automatically generates an `alert`, the `alert` will be removed if `add` was undone.


Example: +
Imagine that you've accidentally deleted the wrong Body (John Doe) from Mortago. You can easily reverse that mistake with the `undo` command instead of adding John Doe all over again!

To undo:

1. Type `undo` or `u` into the command box.
2. Press `Enter` to execute the command.
3. Notice that the result box displays "Undid deleting this entity: <Text>" and John Doe is now back in the list of bodies.


==== Redoing a command: `redo`
This command redoes the effects of the last command you undid. (See <<Undoing a command: `undo`>> for how `undo` can be used.)
You can redo up to 10 of your most recent undone commands.
Only commands that change Mortago's data can be redone. For example, `add`, `update`, and `delete` can be redone, but `list` cannot be redone.

Format: `redo` or `r`

[TIP]
A command can only be redone if it has been undone before.

Example: +
Imagine that you've previously executed `undo` to undo deleting John Doe. You look at the data again and realise you've deleted the right thing after all!

Instead of manually deleting John Doe again, simply `redo` the command.

To redo:

1. Type `redo` or `r` into the command box.
2. Press `Enter` to execute the command.
3. Notice that the result box displays "Deleted this entity: <Text>" and John Doe is now absent from the list of bodies.

// end::undoredo[]

// tag::exit[]

==== Exiting the program : `exit`

Exits the program. +
Format: `exit`

// end::exit[]

=== Document Generation

// tag::genReport[]

==== Generate report for a specific body: `genReport`
Generate an individual report in a PDF filename `Report <body_ID>.pdf` located in `Mortago` file.

Format: `genReport bodyId`

Example:

* `genReport B123` +
Outputs the report PDF for body ID B00000123

// end::genReport[]

// tag::genReports[]

==== Generate reports for all bodies: `genReports`
Generate all individual reports in a PDF filename `Report (ALL BODIES).pdf` located in `Mortago` file.

Format: `genReports`

// end::genReports[]

// tag::genReportSummary[]

==== Generate summary report for all bodies: `genReportSummary`
Generate a tabular report overview containing key information for all bodies in a PDF filename `Report Summary.pdf` located in `Mortago` file.

Format: `genReportSummary`

// end::genReportSummary[]

=== Administrative
==== View admission statistics: `stats`
This command allows you to view a the statistics of the number of bodies admitted to the morgue over the past 10 days, a specific week, a specific month, or a specific year.

The statistics appear in graphical form as a line-chart on the main page of the application. The line chart is initialised automatically and you do not need to enter a command to see it. By default, the line-chart displayed shows the number of bodies admitted over the past 10 days and is automatically updated when a body is added or deleted. You can change the time frame with the commands.

The following is the correct format for typing in stats commands, with example usage:

* To display the last 10 days: `stats` +
The line chart will display statistics over the last 10 days.

* To display a specific week: `stats /week 12/10/2019` +
The line chart will display statistics for the week which contains the specified day. In this case, it is the date 12/10/2019.

* To display a specific month: `stats /month 5/2019` +
The line chart will display statistics or the month specified. In this case, it is May 2019.

* To display a specific year: `stats /year 2019` +
The line chart will display statistics for the year specified. In this case is it 2019.

==== Archive entries: `archive` `[coming in v2.0]`
Archive old or irrelevant entries. One entry can be archived at a time, or all entries of a certain specification can be archived at once.

Format:

* `archive -flag /id id`
* `archive -flag /status status`

Example:

* `archive -b /id 2` +
Archives body entry with ID 2
* `archive -w /status inactive` +
Archives all entries of workers who are inactive

==== View archived entries: `archives` `[coming in v2.0]`
Display all archived entries.

Format: `archives -flag`

Example:

* `archives -b` +
Display of all archived body entries, in order of archive date
* `archives -w` +
Display of all archived worker entries, in order of archive date

// tag::feedback[]

==== Give and view feedback: `feedback` `[coming in v2.0]`
Give workers feedback (for the managerâ€™s own reference), and can display a history of all feedback entered.

Format:
`feedback /workerId workerId /details details`
`feedback`

Example:

* `feedback /id 10 /details very meticulous` +
Note down feedback for worker with ID W10010 with custom details
* `feedback` +
Display of all feedback entered

// end::feedback[]

// tag::assign[]

==== Assign tasks to worker: `assign` `[coming in v2.0]`
Assign a body and task to a worker.

Format: `assign /bodyId bodyId /workerId workerId /task taskDescription`

Example:

* `assign /bodyId 2 /workerId 1 /task send blood sample to lab for analysis` +
Assigns worker with worker ID W00001 to body with ID B00000002 with a task description.

// end::assign[]

=== Help

// tag::help[]

==== View all commands: `help` `[coming in v2.0]`
View a summary of all available commands and their flags. Use the `-v` flag to view the detailed description of all commands and their flags.

Format: `help -flag`

Example: `help -v` +
Shows a link to the User Guide.

3.5.b. Get information about a command: `help command`
View the detailed description of the specified command and its flags, if any.

Format: `help command`

Example: `help undo` +
Shows undo command description.

// end::help[]

==== View help hotlines: `hotlines` `[coming in v2.0]`
View emergency help hotlines.

Format: `hotlines`

Example: `hotlines` +
Lists emergency help hotlines.


== FAQ

*Q*: How do I transfer my data to another Computer? +
*A*: Install the app in the other computer and overwrite the empty data file it creates with the file that contains your Mortago data.

*Q*: How do I save my data? +
*A*: Mortago's data is saved in the hard disk automatically after any command that changes the data. There is no need to save manually.

== Command Summary
* *Add* an entry: `add`
    ** Add a new worker, body, or fridge with the
`add -flag (/attributeName attributeValue)`
* *Update* an entry: `update`
    ** Update the status of each worker, body, or fridge with the `update -flag (/attributeName attributeValue)`
* *Find* : `find (keyword)...` +
    ** Find entries using a keyword. +
    Format: `find keyword`
* *Delete* an entry: `delete`
    ** Delete a body, worker or fridge entry, indicated by its id number. +
    Format: `delete -flag id`
* *Clear* : `clear`
* *View* : `view -flag /id id`
* *List* : `list -flag`

* *View dashboard* : `dashboard`
    ** Brings the dashboard to the front of the app.
* *View alerts* : `alerts`
    ** View all alerts brought up by the app.
* *Sort* : `sort`
    ** Sort all displayed entries according to a given order. +
    Format: `sort /order order (/idOrder idOrder)`
* *Filter* : `filter`
    ** Filter all entries according to the given keyword in any of an entryâ€™s field. +
    Format: `filter (/field keyword)...`
* *Undo* : `undo`
    ** Undo the last executed command. +
    Format: `undo`
* *Redo* : `redo`
    ** Redo the last undone command. +
    Format: `redo`
* *Exit*: `exit`

* *Generate report* : `genReport`
    ** Generate an individual report in a PDF. +
    Format: `genReport bodyId`
* *Generate all reports* : `genReports`
    ** Generate all individual reports in a PDF. +
    Format: `genReports`
* *Generate summary report* : `genReportSummary`
    ** Generate an overview for all reports in a PDF. +
    Format: `genReportSummary`

* *Archive entries* : `archive` `[coming in v2.0]`
    ** Archive old or irrelevant entries.
    Format: `archive -flag /id id`, `archive -flag /status status`
* *View archived entries* : `archives` `[coming in v2.0]`
    ** Display all archived entries.
    Format: `archives -flag`
* *Give and view feedback* : `feedback` `[coming in v2.0]`
    * Give workers feedback and displays a history of all feedback entered.
    Format: `feedback /workerId workerId /notes notes`, feedback`
* *Assign tasks* : `assign` `[coming in v2.0]`
    ** Assign a body and task to a worker.
    Format: `assign /bodyId bodyId /workerId workerId /task taskDescription`
* *Help summary*: `help` `[coming in v2.0]`
    ** Get information about the commands
    Format: `help -flag` `[coming in v2.0]`
* *Help for specific command* : `help command` `[coming in v2.0]`
* *Help hotlines* : `hotlines` `[coming in v2.0]`

== Glossary
*Attribute* : In Mortago, an attribute is the property of a body, fridge or worker. +

*Body* : a corpse +

*Worker* : an employee working in the mortuary +

*Fridge* : a refrigerator used to store a body in the mortuary +

*Command Line Interface (CLI)* : a text-based user interface (UI) used to view and manage computer files +

*Graphical User Interface (GUI)* : an interface through which a user interacts with electronic devices such as computers, hand-held devices and other appliances. This interface uses icons, menus and other visual indicator (graphics) representations to display information and related user controls, unlike text-based interfaces, where data and commands are in text +

*Operating System (OS)* :the low-level software that supports a computer's basic functions, such as scheduling tasks and controlling peripherals +

*Portable Document Format (PDF)* : a file format for capturing and sending electronic documents in exactly the intended format

